<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OECD Pharmaceutical Consumption Data</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .container-card {
            max-width: 900px;
        }
        .data-container {
            min-height: 200px;
        }
    </style>
</head>
<body class="bg-gray-100 flex items-center justify-center min-h-screen p-4">
    <div class="container-card bg-white shadow-xl rounded-2xl p-8 space-y-8 w-full">
        <h1 class="text-3xl font-bold text-center text-gray-800">OECD Pharmaceutical Data Explorer</h1>
        <p class="text-center text-gray-600">
            Select a country, a pharmaceutical category, a market type, and a year to retrieve data.
        </p>

        <div id="form-container" class="space-y-6">
            <div class="grid md:grid-cols-2 gap-6">
                <div>
                    <label for="country" class="block text-sm font-medium text-gray-700">Country:</label>
                    <select id="country" name="country" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 p-2.5 bg-gray-50">
                        <!-- Options will be populated by JavaScript -->
                    </select>
                </div>

                <div>
                    <label for="pharmaceutical" class="block text-sm font-medium text-gray-700">Pharmaceutical Category:</label>
                    <select id="pharmaceutical" name="pharmaceutical" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 p-2.5 bg-gray-50">
                        <!-- Options will be populated by JavaScript -->
                    </select>
                </div>
            </div>

            <div class="grid md:grid-cols-2 gap-6">
                <div>
                    <label for="market_type" class="block text-sm font-medium text-gray-700">Market Type:</label>
                    <select id="market_type" name="market_type" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 p-2.5 bg-gray-50">
                        <!-- Options will be populated by JavaScript -->
                    </select>
                </div>

                <div>
                    <label for="year" class="block text-sm font-medium text-gray-700">Year:</label>
                    <select id="year" name="year" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 p-2.5 bg-gray-50">
                        <!-- Options will be populated by JavaScript -->
                    </select>
                </div>
            </div>

            <div class="flex justify-center">
                <button id="fetch-data" class="bg-indigo-600 text-white font-medium py-2.5 px-6 rounded-full shadow-lg hover:bg-indigo-700 transition duration-300 ease-in-out">
                    Get Data
                </button>
            </div>
        </div>

        <div class="data-container mt-8 p-6 bg-gray-50 rounded-lg border border-gray-200">
            <div id="loading" class="hidden text-center text-gray-500">
                Loading data...
            </div>
            <div id="data-display" class="hidden text-center text-gray-700">
                <!-- Data will be displayed here -->
            </div>
            <div id="error-message" class="hidden text-center text-red-500">
                <!-- Error messages will be displayed here -->
            </div>
            <div id="initial-message" class="text-center text-gray-400">
                Please select your options and click "Get Data".
            </div>
        </div>
    </div>

    <script>
        const countries = [
            {"id": "AUS", "name": "Australia"}, {"id": "AUT", "name": "Austria"}, {"id": "BEL", "name": "Belgium"},
            {"id": "BGR", "name": "Bulgaria"}, {"id": "CAN", "name": "Canada"}, {"id": "CHL", "name": "Chile"},
            {"id": "CRI", "name": "Costa Rica"}, {"id": "CZE", "name": "Czechia"}, {"id": "DEU", "name": "Germany"},
            {"id": "DNK", "name": "Denmark"}, {"id": "ESP", "name": "Spain"}, {"id": "EST", "name": "Estonia"},
            {"id": "FIN", "name": "Finland"}, {"id": "FRA", "name": "France"}, {"id": "GBR", "name": "United Kingdom"},
            {"id": "GRC", "name": "Greece"}, {"id": "HRV", "name": "Croatia"}, {"id": "HUN", "name": "Hungary"},
            {"id": "IRL", "name": "Ireland"}, {"id": "ISL", "name": "Iceland"}, {"id": "ISR", "name": "Israel"},
            {"id": "ITA", "name": "Italy"}, {"id": "JPN", "name": "Japan"}, {"id": "KOR", "name": "Korea"},
            {"id": "LTU", "name": "Lithuania"}, {"id": "LUX", "name": "Luxembourg"}, {"id": "LVA", "name": "Latvia"},
            {"id": "NLD", "name": "Netherlands"}, {"id": "NOR", "name": "Norway"}, {"id": "NZL", "name": "New Zealand"},
            {"id": "POL", "name": "Poland"}, {"id": "PRT", "name": "Portugal"}, {"id": "ROU", "name": "Romania"},
            {"id": "RUS", "name": "Russia"}, {"id": "SVK", "name": "Slovak Republic"}, {"id": "SVN", "name": "Slovenia"},
            {"id": "SWE", "name": "Sweden"}, {"id": "TUR", "name": "TÃ¼rkiye"}
        ];

        const pharmaceuticalCategories = [
            {"id": "_T", "name": "Total"},
            {"id": "A", "name": "Alimentary tract and metabolism"},
            {"id": "A02A", "name": "Antacids"},
            {"id": "A02B", "name": "Drugs for peptic ulcer and gastro-oesophageal reflux diseases (GORD)"},
            {"id": "A10", "name": "Drugs used in diabetes"},
            {"id": "B", "name": "Blood and blood forming organs"},
            {"id": "C", "name": "Cardiovascular system"},
            {"id": "C01A", "name": "Cardiac glycosides"},
            {"id": "C01B", "name": "Antiarrhythmics, Class I and III"},
            {"id": "C02", "name": "Antihypertensives"},
            {"id": "C03", "name": "Diuretics"},
            {"id": "C07", "name": "Beta blocking agents"},
            {"id": "C08", "name": "Calcium channel blockers"},
            {"id": "C09", "name": "Agents acting on the Renin-Angiotensin system"},
            {"id": "C10", "name": "Lipid modifying agents"},
            {"id": "G", "name": "Genito urinary system and sex hormones"},
            {"id": "G03", "name": "Sex hormones and modulators of the genital system"},
            {"id": "H", "name": "Systemic hormonal preparations, excluding sex hormones and insulins"},
            {"id": "J", "name": "Antiinfectives for systemic use"},
            {"id": "J01", "name": "Antibacterials for systemic use"},
            {"id": "M", "name": "Musculo-skeletal system"},
            {"id": "M01A", "name": "Antiinflammatory and antirheumatic products non-steroids"},
            {"id": "N", "name": "Nervous system"},
            {"id": "N02", "name": "Analgesics"},
            {"id": "N05B", "name": "Anxiolytics"},
            {"id": "N05C", "name": "Hypnotics and sedatives"},
            {"id": "N06A", "name": "Antidepressants"},
            {"id": "R", "name": "Respiratory system"},
            {"id": "R03", "name": "Drugs for obstructive airway diseases"},
            {"id": "_O", "name": "Products not elsewhere classified"},
            {"id": "_Z", "name": "Not applicable"}
        ];
        
        const marketTypes = [
            {"id": "_T", "name": "Total"},
            {"id": "TPP", "name": "Third-party-payer market"},
            {"id": "COMMUNITY", "name": "Community pharmacy market"},
            {"id": "HOSPITAL", "name": "Hospital pharmaceutical market"},
            {"id": "_Z", "name": "Not applicable"}
        ];

        const years = Array.from({length: 2023 - 1980 + 1}, (_, i) => 1980 + i);

        // Populate dropdowns
        document.addEventListener('DOMContentLoaded', () => {
            const countrySelect = document.getElementById('country');
            countries.forEach(country => {
                const option = document.createElement('option');
                option.value = country.id;
                option.textContent = country.name;
                countrySelect.appendChild(option);
            });

            const pharmaceuticalSelect = document.getElementById('pharmaceutical');
            pharmaceuticalCategories.forEach(category => {
                const option = document.createElement('option');
                option.value = category.id;
                option.textContent = category.name;
                pharmaceuticalSelect.appendChild(option);
            });

            const marketTypeSelect = document.getElementById('market_type');
            marketTypes.forEach(market => {
                const option = document.createElement('option');
                option.value = market.id;
                option.textContent = market.name;
                marketTypeSelect.appendChild(option);
            });

            const yearSelect = document.getElementById('year');
            years.forEach(year => {
                const option = document.createElement('option');
                option.value = year;
                option.textContent = year;
                yearSelect.appendChild(option);
            });
        });

        document.getElementById('fetch-data').addEventListener('click', () => {
            const country = document.getElementById('country').value;
            const pharmaceutical = document.getElementById('pharmaceutical').value;
            const marketType = document.getElementById('market_type').value;
            const year = document.getElementById('year').value;

            // Show loading message and hide previous content
            document.getElementById('initial-message').classList.add('hidden');
            document.getElementById('data-display').classList.add('hidden');
            document.getElementById('error-message').classList.add('hidden');
            document.getElementById('loading').classList.remove('hidden');

            // The URL provided is not a standard data endpoint but a dataflow definition.
            // A real request would look something like this, but requires a functional API.
            // const apiUrl = `https://sdmx.oecd.org/public/rest/data/OECD.ELS.HD/HEALTH_PHMC@DF_PHMC_CONSUM/1.0?startPeriod=${year}&endPeriod=${year}&REF_AREA=${country}&PHARMACEUTICAL=${pharmaceutical}&MARKET_TYPE=${marketType}`;
            
            // Simulating an API call with dummy data
            setTimeout(() => {
                document.getElementById('loading').classList.add('hidden');
                
                // For demonstration, let's pretend the API returned a value.
                const dummyData = {
                    country: document.getElementById('country').options[document.getElementById('country').selectedIndex].text,
                    pharmaceutical: document.getElementById('pharmaceutical').options[document.getElementById('pharmaceutical').selectedIndex].text,
                    market: document.getElementById('market_type').options[document.getElementById('market_type').selectedIndex].text,
                    year: year,
                    value: Math.random() * 1000 // Dummy value
                };

                const display = document.getElementById('data-display');
                display.innerHTML = `
                    <h3 class="text-xl font-semibold mb-2">Data for ${dummyData.country} (${dummyData.year})</h3>
                    <p class="text-md"><strong>Pharmaceutical Category:</strong> ${dummyData.pharmaceutical}</p>
                    <p class="text-md"><strong>Market Type:</strong> ${dummyData.market}</p>
                    <p class="text-md mt-4 text-2xl font-bold text-indigo-600">
                        Value: ${dummyData.value.toFixed(2)} Defined daily dose per 1000 inhabitants per day
                    </p>
                `;
                display.classList.remove('hidden');
            }, 1500);
        });
    </script>
</body>
</html>
